<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jet & Missile</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const airplane = new Image();
        airplane.src = "airplane.png";

        const missile = new Image();
        missile.src = "missile.png";

        const explosion = new Image();
        explosion.src = "explosion.png";

        const planeWidth = 100;
        const planeHeight = 100;
        let planeX = canvas.width / 2;
        let planeY = canvas.height / 2;

        const missileWidth = 80;
        const missileHeight = 70;
        let missileX = canvas.width - missileWidth;
        let missileY = canvas.height - missileHeight;
        let missileSpeed = 5;
        let missileLaunched = false;

        canvas.addEventListener("mousemove", (event) => {
            planeX = event.clientX - planeWidth / 2;
            planeY = event.clientY - planeHeight / 2;

            if (!missileLaunched) {
                // Atualiza a posição do míssil estático para apontar para o avião (cursor do mouse)
                const angle = Math.atan2(planeY - (missileY + missileHeight / 2), planeX - (missileX + missileWidth / 2));
                missileX = canvas.width - missileWidth + missileSpeed * Math.cos(angle);
                missileY = canvas.height - missileHeight + missileSpeed * Math.sin(angle);
            }
        });

        canvas.addEventListener("contextmenu", (event) => {
            event.preventDefault();

            if (missileLaunched) {
                missileLaunched = false;
            } else {
                missileX = canvas.width - missileWidth;
                missileY = canvas.height - missileHeight;
                missileLaunched = true;
            }
        });

        const explosionDuration = 100;
        let explosionFrames = 0;
        let missileStaticX = canvas.width - missileWidth;
        let missileStaticY = canvas.height - missileHeight;

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (missileLaunched) {
                const angle = Math.atan2(planeY - missileY, planeX - missileX);

                ctx.save();
                ctx.translate(missileX + missileWidth / 2, missileY + missileHeight / 2);
                ctx.rotate(angle + Math.PI / 2);
                ctx.drawImage(missile, -missileWidth / 2, -missileHeight / 2, missileWidth, missileHeight);
                ctx.restore();

                missileX += missileSpeed * Math.cos(angle);
                missileY += missileSpeed * Math.sin(angle);

                if (
                    missileX < planeX + planeWidth &&
                    missileX + missileWidth > planeX &&
                    missileY < planeY + planeHeight &&
                    missileY + missileHeight > planeY
                ) {
                    missileLaunched = false;
                    explosionFrames = explosionDuration;
                }
            }

            if (explosionFrames > 0) {
                ctx.drawImage(explosion, planeX, planeY, planeWidth, planeHeight);
                explosionFrames--;
            } else {
                ctx.drawImage(airplane, planeX, planeY, planeWidth, planeHeight);
            }

            if (!missileLaunched) {
                // Desenha o míssil estático apontando para o avião (cursor do mouse)
                ctx.save();
                ctx.translate(missileStaticX + missileWidth / 2, missileStaticY + missileHeight / 2);
                ctx.rotate(Math.atan2(planeY - (missileStaticY + missileHeight / 2), planeX - (missileStaticX + missileWidth / 2)) + Math.PI / 2);
                ctx.drawImage(missile, -missileWidth / 2, -missileHeight / 2, missileWidth, missileHeight);
                ctx.restore();
            }

            requestAnimationFrame(animate);
        }

        airplane.onload = animate;
    </script>
</body>
</html>
